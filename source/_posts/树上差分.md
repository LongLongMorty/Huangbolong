---
title: 树上差分
date: 2019-05-03 09:13:00
categories: 树上差分
urlname: 38
tags:
---
<!--markdown--># 树上差分

## 描述

把差分数组（不是前缀和）放到一个树上，使某个节点的权值等于其本身加上所有子节点的差分的那个值的和。~~（语无伦次）~~

差分数组的作用是使区间修改的时间复杂度更低，对应到树上，就可以应用到类似于这样的情况：

![树](http://pic.yupoo.com/zhufn/9a15cdec/a2f617c0.png)

### 点的差分

给A—B的简单路径上所有的节点的权值增加1。

可以把这条路径拆成两条链，分别为A到L（A和B的LCA）和B到L。

把A与B的标记增加1，那么A到L和B到L对应的值在统计时都会增加1，而L的值总共增加了2，所以再把L的标记减1。L的父亲节点，类似修改差分数组的区间时区间之后的那个点，将其标记减1。

### 边的差分

把边权转化到**下边的**点上。

所以这次L点的标记不能动，那么，区间每增加1，L点的标记要减去2.


## 板子题
[洛谷 P3128 最大流Max Flow](https://buringstraw.win/index.php/archives/39/)
